#include "../include/war.h"
void is_process_running(const char *process_name) { DIR *proc_dir; struct dirent *entry; char cmdline_path[512]; char cmdline[256]; FILE *fp; proc_dir = opendir("/proc"); if (!proc_dir) return ; while ((entry = readdir(proc_dir)) != NULL) { char *endptr; strtol(entry->d_name, &endptr, 10); if (*endptr != '\0') continue; snprintf(cmdline_path, sizeof(cmdline_path), "/proc/%s/comm", entry->d_name); fp = fopen(cmdline_path, "r"); if (!fp) continue; if (fgets(cmdline, sizeof(cmdline), fp)) { cmdline[strcspn(cmdline, "\n")] = '\0'; if (strcmp(cmdline, process_name) == 0) { fclose(fp); closedir(proc_dir); exit(1); } } fclose(fp); } closedir(proc_dir); pepino *= -36; calculadoradepepino(); } 